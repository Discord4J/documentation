---
id: migrating-from-v3-2-to-v3-3
title: Migrating from v3.2 to v3.3
sidebar_label: Migrating from v3.2 to v3.3
slug: /migrating-from-v3-2-to-v3-3
---

This article should help you update your bot from Discord4J v3.2.x to v3.3.0. This new major release is over a year in the making and has lots of changes.

## Before you start

:::note
If you encounter an issue while following this guide or discover something missing, feel free to suggest changes or discuss them in our [server](https://discord.gg/d4j). Thanks!
:::

## Updating dependencies

Discord4J v3.3 depends on Reactor 2023 release train ([Reactor Core](https://github.com/reactor/reactor-core) 3.4.x and [Reactor Netty](https://github.com/reactor/reactor-netty) 1.0.x). It maintains the JDK 8 baseline and includes other dependency upgrades like:
- discord-json 1.6 (from 1.5)
- jackson-databind 2.17 (from 2.12)
- jackson-datatype 2.17 (from 2.12)
- caffeine 2.9 (from 2.8)
- immutables 2.10 (from 2.9)
- jsr305 from com.google.code.findbugs 3.0 (new dependency)

### Gradle

```groovy
repositories {
  mavenCentral()
}

dependencies {
  implementation 'com.discord4j:discord4j-core:3.3.0'
}
```

### Maven

```xml
<dependencies>
    <dependency>
        <groupId>com.discord4j</groupId>
        <artifactId>discord4j-core</artifactId>
        <version>3.3.0</version>
    </dependency>
</dependencies>
```

## Discord4J features

### Internal validation for retrieves restricted data in Messages

Calling any method that retrieves restricted data (message content, embeds, etc.) without enabling the `MESSAGE_CONTENT` will raise an `UnsupportedOperationException`.

For that then you need to make sure has the `MESSAGE_CONTENT` enabled in your bot and the intent added when creating the BOT instance.

:::info
For more information you can check the [discord docs](https://discord.com/developers/docs/events/gateway#message-content-intent).
:::

### New Emoji structure

One notable change is how Emoji are created now in D4J.

For 3.2.x if you want to create a new Custom Emoji, you use the following

```java
public class MyEmojis {
  public static final ReactionEmoji GITHUB = ReactionEmoji.custom(Snowflake.of(822054840389206056L), "github", false);
  public static final ReactionEmoji GOOGLE = ReactionEmoji.custom(Snowflake.of(937078670223347752L), "google", false);
  public static final ReactionEmoji CLOCK1 = ReactionEmoji.unicode("üïê");
}
```

Now this code in 3.3 needs to be changed to:

```java
public class MyEmojis {
  public static final CustomEmoji GITHUB = CustomEmoji.of(Snowflake.of(822054840389206056L), "github", false);
  public static final CustomEmoji GOOGLE = CustomEmoji.of(Snowflake.of(937078670223347752L), "google", false);
  public static final UnicodeEmoji CLOCK1 = UnicodeEmoji.of("üïê");
}
```

:::note
Check more details about the API and behavior changes in [What's new in v3.3](/whats-new-in-v3-3).
:::
